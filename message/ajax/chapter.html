<div class="row">
	<div id="breadcrumb" class="col-md-12">
		<ol class="breadcrumb">
			<li><a href="index.html">Dashboard</a></li>
			<li><a href="#">Courses</a></li>
			<li><a href="#">addcourse</a></li>
		</ol>
	</div>
</div>
<div class="row">
<div class="col-md-12">
           <div class="bg-success" id="add-success" hidden>
                                            <i class="fa fa-check"></i> <b>Success!</b>
                                            chapter saved Successfully.
                                        </div>
                                        <div class="bg-success" id="edit-success" hidden>
                                            <i class="fa fa-check"></i> <b>Success!</b>
                                            chapter edited Successfully.
                                        </div>
                                        
                                        <div class="bg-warning" id="select-entry" hidden>
                                            <i class="fa fa-ban"></i> <b>Error!</b>
                                            Select an entry from below table.
                                        </div>
                                        <div class="bg-danger" id="delete" hidden>
                                            <i class="fa fa-check"></i> <b>Success!</b>
                                            chapter deleted Successfully.
                                        </div>
                                    </div>
 </div>    
<div class="row pull-right" id="btns">
<div  class="col-md-12">
<button type="button" class="btn btn-success btn-lg " id="chapter-btn" name="chapter-btn">Add </button>
                  <button type="button" class="btn btn-warning btn-lg " id="edit-chapter-btn" name="edit-chapter-btn">Edit</button>

                   <button type="button" class="btn btn-danger btn-lg" id="delete-btn" name="delete-btn">Delete </button>
</div>
</div>                   
<div class="row" id="chapter-table">
	<div class="col-xs-12">
    	<div class="box">
			<div class="box-header">
			    <div class="box-name">
					<i class="fa fa-linux"></i>
					<span>Chapter Details</span>
				</div>
				<div class="box-icons">
					<a class="collapse-link">
						<i class="fa fa-chevron-up"></i>
					</a>
					<a class="expand-link">
						<i class="fa fa-expand"></i>
					</a>
					<a class="close-link">
						<i class="fa fa-times"></i>
					</a>
				</div>
				<div class="no-move"></div>
			</div>
			<div class="box-content no-padding table-responsive">

				<table class="table table-bordered table-striped table-hover table-heading table-datatable" id="datatable-2">
				
					<thead>
						<tr>
						    <th><label><input type="text" name="" value="" class="search_init" disabled="true" /></label></th>
							<th><label><input type="text" name="search_cname" value="Search CourseName" class="search_init" /></label></th>
							<th><label><input type="text" name="search_num" value="Search Number" class="search_init" /></label></th>
							<th><label><input type="text" name="search_name" value="Search Name" class="search_init" /></label></th>
							
						</tr>
					</thead>
					<tbody id="view-row">
						
					</tbody>
					<tfoot>
						<tr>
						    <th></th>
						    <th>Course Name</th>
							<th>chapter Number</th>
							<th>chapter Name</th>
							
							
						</tr>
					</tfoot>
				</table>
			</div>
		</div>
	</div>
</div>

<div class="row" id="add-chapter" hidden>
	<div class="col-xs-12">
    	<div class="box">
			<div class="box-header">
			    <div class="box-name">
					<i class="fa fa-search"></i>
					<span>Enter Chapter</span>
				</div>
				<div class="box-icons">
					<a class="collapse-link">
						<i class="fa fa-chevron-up"></i>
					</a>
					<a class="expand-link">
						<i class="fa fa-expand"></i>
					</a>
					<a class="close-link">
						<i class="fa fa-times"></i>
					</a>
				</div>
				<div class="no-move"></div>
			</div>
			<div class="box-content">
				<h4 class="page-header">Enter Chapter Details</h4>
				<form class="form-horizontal" role="form" id="add-form">
					<div class="form-group">
						<label class="col-sm-2 control-label">Select Course</label>
						<div class="col-sm-4">
							<select  id="cname" name="cname">
							
						</select>
						</div>
						
					</div>
					<div class="form-group has-success has-feedback">
						<label class="col-sm-2 control-label">chapter Number</label>
						<div class="col-sm-4">
							<input type="text" class="form-control" placeholder="chapter Number" id="chnum" name="chnum">
						</div>
						
					</div>
					<div class="form-group has-success has-feedback">
						<label class="col-sm-2 control-label">Chapter Name</label>
						<div class="col-sm-4">
							<input type="text" class="form-control" placeholder="Details" id="chname" name="chname">
						</div>
						
					</div>
					
					</form>
					<div class="clearfix"></div>


					<div >
						
					
							<button type="submit" class="btn btn-primary btn-label-left" id="save" name="save">
							<span><i class="fa fa-clock-o"></i></span>
								Submit
							</button>
							<button type="cancel" class="btn btn-default btn-label-left" id="cancel" name="cancel">
							<span><i class="fa fa-clock-o txt-danger"></i></span>
								Cancel
						   </button>
						</div>
              </div>   

	</div>
</div>
</div>

<div class="row" id="edit-chapter" hidden>
	<div class="col-xs-12">
    	<div class="box">
			<div class="box-header">
			    <div class="box-name">
					<i class="fa fa-search"></i>
					<span>Enter Chapter</span>
				</div>
				<div class="box-icons">
					<a class="collapse-link">
						<i class="fa fa-chevron-up"></i>
					</a>
					<a class="expand-link">
						<i class="fa fa-expand"></i>
					</a>
					<a class="close-link">
						<i class="fa fa-times"></i>
					</a>
				</div>
				<div class="no-move"></div>
			</div>
			<div class="box-content">
				<h4 class="page-header">Enter Chapter details</h4>
				<form class="form-horizontal" role="form" id="edit-form">
					<div class="form-group">
						<label class="col-sm-2 control-label">Course Name</label>
							<div class="col-sm-4">
								<select   name="edit-cname" id="edit-cname">
							
						</select>
						</div>
					</div>
					<div class="form-group has-success has-feedback">
						<label class="col-sm-2 control-label">chapter Number</label>
						<div class="col-sm-4">
							<input type="text" class="form-control" placeholder="chapter Number" id="edit-chnum" name="edit-chnum">
						</div>
						
					</div>
					<div class="form-group has-success has-feedback">
						<label class="col-sm-2 control-label">Chapter Name</label>
						<div class="col-sm-4">
							<input type="text" class="form-control" placeholder="chapter Name" id="edit-chname" name="edit-chname">
						</div>
						
					</div>
					
					</form>
					<div class="clearfix"></div>


					<div >
						
					
							<button type="submit" class="btn btn-primary btn-label-left" id="update" name="update">
							<span><i class="fa fa-clock-o"></i></span>
								Update
							</button>
							<button type="cancel" class="btn btn-default btn-label-left" id="cancel-update" name="cancel-update">
							<span><i class="fa fa-clock-o txt-danger"></i></span>
								Cancel
						   </button>
						</div>
              </div>   

	</div>
</div>
</div>

<script type="text/javascript">
// Run Datables plugin and create 3 variants of settings
function AllTables(){
	TestTable1();
	TestTable2();
	TestTable3();
	LoadSelect2Script(MakeSelect2);
}
function MakeSelect2(){
	//$('select').select2();
	$('.dataTables_filter').each(function(){
		$(this).find('label input[type=text]').attr('placeholder', 'Search');
	});
}

// Run timepicker
function DemoTimePicker(){
	$('#input_time').timepicker({setDate: new Date()});
}

function Select2Test(){
	$("#edit-name").select2().attr("selected",true);
}

function load_All(){
  var operation='getAllChapter';
  $.ajax({
    type: "POST",
    url: "php/ajaxInterface/chapter.php",
    data:{operation:operation}
    }).done(function(result)
    { console.log(result);
      m=result;
      var dis='';
      for(i=0;i<result.length;i++){
        dis+='<tr>';
        dis+="<td><input type='radio' name='ch' id='"+result[i]['chid']+"'</td>";
        dis+="<td>"+result[i]['cname']+"</td>";
        dis+="<td>"+result[i]['chnum']+"</td>";
        dis+="<td>"+result[i]['chname']+"</td>";
        
        
        dis+='</tr>';
      }
      $('#view-row').html(dis);
     

    });


} 
$(document).ready(function() {
	// Load Datatables and run plugin on tables 
	LoadDataTablesScripts(AllTables);
	// Initialize datepicker
	$('#input_date').datepicker({setDate: new Date()});
	// Load Timepicker plugin
	LoadTimePickerScript(DemoTimePicker);
	// Add tooltip to form-controls
	$('.form-control').tooltip();
	LoadSelect2Script(Select2Test);
	//LoadSelect2Script(DemoSelect2);
	// Load example of form validation
	LoadBootstrapValidatorScript(DemoFormValidator);
	// Add drag-n-drop feature to boxes
    WinMove();
    //main code
    load_All();
    $('.selectpicker').selectpicker();
    var operation='getAllCourse';
  $.ajax({
      type:'POST',
      url:"php/ajaxInterface/chapter.php",
      data:{operation:operation}
    }).done(function(result){
       console.log(result);
      var dis='';
      for(var i=0;i<result.length;i++){
        dis+="<option id="+result[i]['cid']+">"+result[i]['cname']+"</option>";
      }
      $('#cname').html('<option id="-1">---</option>'+dis).selectpicker();
      
     
      $('#edit-cname').html(dis);
    });

	$('#chapter-btn').click(function() {
		
         $('#add-chapter').show();
		$('#chapter-table').hide();
		$('#btns').hide();     
    

  
		
	});

	$('#save').click(function(){
   
             //var disabled = $('#add-cname-form').find(':input:disabled').removeAttr('disabled'); 
             var cname= $('#cname').val();        
              var chnum=$('#chnum').val();
              var chname=$('#chname').val();
              
              
              var operation='createChapter';
                            
              $.ajax({
               type: "POST",
                url: "php/ajaxInterface/chapter.php",
                data:{operation:operation,cname:cname,chnum:chnum,chname:chname}
                 }).done(function(result)
                 { 
                    console.log(result);
                    if(result==1){
                         $('#add-success').fadeIn(200).delay(5000).fadeOut(1000);
                         $('#add-form')[0].reset();
                         $('#add-chapter').hide();
		                 $('#chapter-table').show();
		                 $('#btns').show();
                         load_All();
                       }else{
                      $('#exist').fadeIn(200).delay(5000).fadeOut(1000);
                  }
             }); 
      
 
      
             
  });

	$('#cancel').click(function() {
		$('#add-chapter').hide();
		$('#chapter-table').show();
		$('#btns').show();
	});

	$('#edit-chapter-btn').click(function() {
		var chid=$("input[type='radio'][name='ch']:checked").attr('id');
    if(typeof chid == 'undefined'){
      console.log(1);
      $('#select-entry').fadeIn(200).delay(5000).fadeOut(1000);
      return;
    }
    console.log(chid);
    var operation='getSpecificChapter';
    $.ajax({
    type: "POST",
    url: "php/ajaxInterface/chapter.php",
    data:{operation:operation,chid:chid}
    }).done(function(result)
    { console.log(result);
    	
    	$('#edit-cname').prepend("<option selected>"+result['cname']+"</option>").select2();
      $('#edit-chnum').val(result['chnum']);
      $('#edit-chname').val(result['chname']);
		$('#edit-chapter').show();
		$('#chapter-table').hide();
		$('#btns').hide();
	});
	});

	$('#update').click(function(){
      
    var disabled = $('#edit-form').find(':input:disabled').removeAttr('disabled');
    var cname=$('#edit-cname').val();
    var chnum=$('#edit-chnum').val();
    var chname=$('#edit-chname').val();
    disabled.attr('disabled','disabled');
    var operation='updateChapter'; 
    $.ajax({
      type: "POST",
      url: "php/ajaxInterface/chapter.php",
      data:{operation:operation,cname:cname,chnum:chnum,chname:chname}
    }).done(function(result)
    {
        console.log(result);
       
        $('#edit-success').fadeIn(200).delay(5000).fadeOut(1000);
        $('#edit-form')[0].reset();
        $('#edit-chapter').hide();
		$('#chapter-table').show();
		$('#btns').show();
        
        load_All();
        
                      
    });
  
  });  

  $('#delete-btn').click(function(){
   	var x=confirm('Do you really want to delete?');
    if(x){
    var chid=$("input[type='radio'][name='ch']:checked").attr('id');
    if(typeof chid == 'undefined'){
      console.log(1);
      $('#select-entry').fadeIn(200).delay(5000).fadeOut(1000);
      return;
    }
    console.log(chid);
    var operation='deleteChapter';
    $.ajax({
    type: "POST",
    url: "php/ajaxInterface/chapter.php",
    data:{operation:operation,chid:chid}
    }).done(function(result)
    { console.log(result);
    	 $('#delete').fadeIn(200).delay(5000).fadeOut(1000);
    	load_All();
	});
}
  });    

	$('#cancel-update').click(function() {
		$('#edit-form')[0].reset();
		 $('#edit-chapter').hide();
		$('#chapter-table').show();
		$('#btns').show();
	});
	
});
</script>
